<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="style/stleMain.css">
        
        <script src="js/jquery-3.7.1.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script src="js/index.js"></script>
    </head>
    <body onload="findAllVideos()">
        <header>
            <h1></h1>
        </header>
        
        <section>
            <h2>Salvar video</h2>
            <nav></nav>
                
                <input type="file" id="file">
                <button onclick="enviarVideo()">Enviar Vídeo</button>

                <br><br>
                
                <div id ="table"></div>

                <br><br>
                
                <video id="videoPlayer" controls width="640" height="360" style="display: none;"></video>
        </section>
        
        <footer>
        </footer>
        <script>
            function enviarVideo() {
                let input = document.getElementById('file');
                let file = input.files[0];
                //let tamanhoMaximo = 4 * 1024 * 1024 * 1024;

                //if (!file) {
                //    alert("Selecione um arquivo de vídeo.");
                //    return;
                //}
                //if (file.size > tamanhoMaximo) {
                //    alert("Arquivo muito grande. Máximo permitido: 4 GB.");
                //    input.value = '';
                //    return;
                //}
                //let nomeVideo = prompt("Digite o nome do vídeo:");
                //if (!nomeVideo || nomeVideo.trim() === "") {
                //    alert("Nome do vídeo não informado.");
                //    return;
                //}

                const formData = new FormData();
                formData.append("video", file);
                //formData.append("nome", nomeVideo);
                fetch("ServletVideo?opcao=insert", {
                    method: "POST",
                    body: formData
                })
                        .then(response => response.json())
                        .then(json => {
                            if (json.status === "success") {
                                alert("Vídeo enviado com sucesso!");
                            } else {
                                alert("Erro: " + json.msg);
                            }
                        })
                        .catch(error => {
                            console.error("Erro ao enviar vídeo:", error);
                            alert("Erro ao enviar vídeo:");
                        });
                input.value = '';
            }

            
        </script>
    </body>
</html>
